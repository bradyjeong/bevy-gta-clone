# City Demo Baseline Performance Report

**Date:** 2025-01-07  
**Scene:** City Demo Baseline  
**Oracle Phase:** Sprint 0 - Baseline Measurement  
**Purpose:** Establish denominators for Oracle's "300% improvement" targets  

## Test Configuration

- **Entities:** 6,125 total (5,000 buildings + 1,250 decorations + ground plane)
- **Scene Type:** Simple city grid with basic meshes
- **Measurement Duration:** 30 seconds
- **Window Resolution:** 1920x1080
- **Bevy Version:** 0.16.1

## Performance Metrics

### Core Performance
- **Average FPS:** 83.53
- **Average Frame Time:** 11.97 ms
- **99th Percentile Frame Time:** 30.55 ms
- **Total Frames Measured:** 2,357

### Resource Usage
- **Peak Entities:** 6,125
- **Estimated Memory Usage:** 1,196 MB

## System Information

- **OS:** macOS 15.5 Sequoia
- **CPU:** Apple M4 Max (14 cores)
- **Memory:** 36.0 GiB
- **GPU:** Apple M4 Max (IntegratedGpu)
- **Backend:** Metal

## Performance Profile

The baseline shows decent performance with some frame time variance:
- Initial frames: ~120 FPS (8ms frame time)
- Mid-test stability: ~115-120 FPS 
- Later degradation: ~55-60 FPS (17-18ms frame time)

## Oracle Target Calculations

Based on these baseline measurements, Oracle's "300% improvement" targets would be:

### Sprint 1-2 Target (100% improvement)
- **Target FPS:** 167 FPS (2x baseline)
- **Target Frame Time:** 6.0 ms (50% of baseline)
- **Target 99th Percentile:** 15.3 ms (50% of baseline)

### Sprint 3-4 Target (200% improvement)
- **Target FPS:** 251 FPS (3x baseline)
- **Target Frame Time:** 4.0 ms (33% of baseline)
- **Target 99th Percentile:** 10.2 ms (33% of baseline)

### Sprint 5-6 Target (300% improvement)
- **Target FPS:** 334 FPS (4x baseline)
- **Target Frame Time:** 3.0 ms (25% of baseline)
- **Target 99th Percentile:** 7.6 ms (25% of baseline)

## Methodology

### Scene Setup
```rust
// 70x70 grid = ~5k entities
const CITY_SIZE: i32 = 70;
const MEASUREMENT_DURATION: Duration = Duration::from_secs(30);
const BUILDING_SPACING: f32 = 10.0;

// Buildings: Simple cubes (5x15x5)
// Decorations: Spheres (radius 2.0) on every 4th building
// Ground: Large plane covering entire grid
// Lighting: Single directional light + ambient
```

### Measurement System
- Real-time frame time collection during 30-second window
- Circular camera movement for consistent load
- Automatic shutdown after measurement period
- Statistical analysis with 99th percentile calculation

## Next Steps

1. **Implement batching system** (Sprint 1 target)
2. **Add LOD system** (Sprint 2 target)
3. **Implement GPU culling** (Sprint 3 target)
4. **Optimize materials/textures** (Sprint 4 target)

## Baseline Validation

✅ **Scene Complexity:** 6,125 entities (meets ~5k requirement)  
✅ **Measurement Duration:** 30 seconds (meets Oracle requirement)  
✅ **Statistical Analysis:** 99th percentile frame times captured  
✅ **Reproducible:** Deterministic scene generation  
✅ **Hardware Info:** Complete system profiling  

This baseline establishes solid denominators for Oracle's performance improvement tracking throughout the 12-week restoration plan.
